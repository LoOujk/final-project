(()=>{"use strict";(()=>{const e=JSON.parse('[{"user":"Admin","login":"userAdmin","password":"pass123admin","email":"admin@mail.ru"},{"user":"NoAdmin","login":"userUser","password":"pass123user","email":"user@mail.ru"}]');let i=document.querySelector(".inputForm");console.log();let s=i.querySelectorAll("input"),l=document.getElementById("inputName"),t=document.getElementById("inputSurName"),a=document.getElementById("inputPassword"),n=document.getElementById("inputConfPassword"),r=document.getElementById("inputEmail"),u=document.querySelectorAll("span"),d=document.querySelector(".signUp"),o=e;console.log(o),window.onload=function(){localStorage.getItem("usersJson")?o=JSON.parse(localStorage.getItem("usersJson")):localStorage.setItem("usersJson",JSON.stringify(e))},d.addEventListener("click",(function(e){e.preventDefault();let i={user:"NoAdmin",login:l.value,surname:t.value,password:a.value,email:r.value};s.forEach(((e,i)=>{e.value.length<6?(u[i].style.visibility="visible",e.className="userDataInvalid"):(u[i].style.visibility="hidden",e.className="userData")})),a.value!=n.value?(a.className="userDataInvalid",n.className="userDataInvalid",u[2].innerText="Passwords mismatch",u[3].innerText="Passwords mismatch",u[2].style.visibility="visible",u[3].style.visibility="visible"):a.value==n.value&&a.value.length>6&&n.value.length>6&&(a.className="userData",n.className="userData",u[2].innerText="Required field, min 6 symbols",u[3].innerText="Required field, min 6 symbols",u[2].style.visibility="hidden",u[3].style.visibility="hidden"),function(){let e=/^(?!.*@.*@.*$)(?!.*@.*\-\-.*\..*$)(?!.*@.*\-\..*$)(?!.*@.*\-$)(.*@.+(\..{1,11})?)$/;r.value.length<6?(u[4].innerText="Required field, min 6 symbols",u[4].style.visibility="visible"):0==e.test(r.value)?(u[4].innerText="This is not a mail format",u[4].style.visibility="visible",r.className="userDataInvalid"):r.value.length>6&&1==e.test(r.value)?o.forEach((e=>{r.value==e.email&&(u[4].innerText="This mail is already use",u[4].style.visibility="visible",r.className="userDataInvalid")})):(r.className="userData",u[4].innerText="Required field, min 6 symbols",u[4].style.visibility="hidden")}(),"hidden"==u[0].style.visibility&&"hidden"==u[1].style.visibility&&"hidden"==u[2].style.visibility&&"hidden"==u[3].style.visibility&&"hidden"==u[4].style.visibility&&(o.push(i),localStorage.setItem("usersJson",JSON.stringify(o)),sessionStorage.setItem("checkUser",i.user),location.href="index.html")}))})()})();